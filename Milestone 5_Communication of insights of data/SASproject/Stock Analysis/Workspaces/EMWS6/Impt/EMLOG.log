*------------------------------------------------------------*
User:                DM
Date:                May 29, 2019
Time:                15:37:31
Site:                12601940
Platform:            W32_8PRO
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                May 29, 2019
Time:                15:37:29
*------------------------------------------------------------*
10866  proc freq data=EMWS6.Impt_VariableSet noprint;
10867  table ROLE*LEVEL/out=WORK.ImptMETA;
10868  run;
 
NOTE: There were 11 observations read from the data set EMWS6.IMPT_VARIABLESET.
NOTE: The data set WORK.IMPTMETA has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10869  proc print data=WORK.ImptMETA label noobs;
10870  var ROLE LEVEL COUNT;
10871  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
10872  title9 ' ';
10873  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
10874  run;
 
NOTE: There were 4 observations read from the data set WORK.IMPTMETA.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10875  title10;
 
10893  data WORK.Impt_TREEINPUTS;
10894  set WORK.M1P29_QX;
10895  if ROLE ne 'FREQ' then do;
10896  if ((ROLE in('TARGET','REJECTED') and useTree='D') or useTree='N') then delete;
10897  ROLE = 'INPUT';
10898  end;
10899  run;
 
NOTE: There were 10 observations read from the data set WORK.M1P29_QX.
NOTE: The data set WORK.IMPT_TREEINPUTS has 9 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
10900  data WORK.M1P29_QX;
10901  set WORK.M1P29_QX;
10902  if METHOD in("TREE", "TREESURR") then role = 'TARGET';
10903  else if (role = 'REJECTED') then role = 'INPUT';
10904  run;
 
NOTE: There were 10 observations read from the data set WORK.M1P29_QX.
NOTE: The data set WORK.M1P29_QX has 10 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
10905  *------------------------------------------------------------* ;
10906  * Impt: DMDBClass Macro ;
10907  *------------------------------------------------------------* ;
10908  %macro DMDBClass;
10909      code(ASC) name(ASC) sentiment(ASC) target(DESC)
10910  %mend DMDBClass;
10911  *------------------------------------------------------------* ;
10912  * Impt: DMDBVar Macro ;
10913  *------------------------------------------------------------* ;
10914  %macro DMDBVar;
10915      LOG_high LOG_low LOG_open LOG_price REP_volume change
10916  %mend DMDBVar;
10917  *------------------------------------------------------------*;
10918  * Impt: Create DMDB;
10919  *------------------------------------------------------------*;
10920  proc dmdb batch data=EMWS6.Trans_TRAIN
10921  dmdbcat=WORK.Impt_DMDB
10922  classout=WORK.Impt_DMDBCLASSOUT
10923  varout=WORK.IMPUTE_0W995PV_DMDBVAROUT
10924  maxlevel = 513
10925  ;
10926  class %DMDBClass;
10927  var %DMDBVar;
10928  target
10929  target
10930  ;
10931  run;
 
NOTE: Records processed = 91   Memory used = 511K.
NOTE: View EMWS6.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: There were 91 observations read from the data set EMWS6.PART_TRAIN.
NOTE: There were 91 observations read from the data set EMWS6.TRANS_TRAIN.
NOTE: The data set WORK.IMPT_DMDBCLASSOUT has 14 observations and 9 variables.
NOTE: The data set WORK.IMPUTE_0W995PV_DMDBVAROUT has 6 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
10932  quit;
10933  *--- end code ---*;
 
10934  proc sort data=WORK.Impt_DMDBCLASSOUT;
10935  by NAME;
10936  run;
 
NOTE: There were 14 observations read from the data set WORK.IMPT_DMDBCLASSOUT.
NOTE: The data set WORK.IMPT_DMDBCLASSOUT has 14 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10937  data WORK.Impt_DMDBCLASSOUT;
10938  retain missFlag;
10939  set WORK.Impt_DMDBCLASSOUT;
10940  by NAME;
10941  output;
10942  if first.name then missflag = 0;
10943  if (TYPE='C' and CRAW='') or (TYPE='N' and NRAW=.) then missflag = 1;
10944  if last.name and ^missFlag then do;
10945  if type = 'C' then do;
10946  LEVEL= '';
10947  CRAW = '';
10948  NRAW = .;
10949  end;
10950  else do;
10951  LEVEL='.';
10952  CRAW = '.';
10953  NRAW= .;
10954  end;
10955  FREQUENCY = 0;
10956  FREQPERCENT = 0;
10957  NMISSPERCENT = 0;
10958  output;
10959  end;
10960  run;
 
NOTE: There were 14 observations read from the data set WORK.IMPT_DMDBCLASSOUT.
NOTE: The data set WORK.IMPT_DMDBCLASSOUT has 18 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10961  data WORK.Impt_MISS(KEEP=NAME NMISS PERCENTMISS);
10962  length NAME $32;
10963  set
10964  WORK.Impt_DMDBCLASSOUT(rename=(freqpercent=PERCENTMISS frequency=NMISS) where=((TYPE='C' and CRAW='') or (TYPE='N' and NRAW=.)))
10965  WORK.IMPUTE_0W995PV_DMDBVAROUT
10966  ;
10967  if (NMISS ne . and N ne .) then PERCENTMISS = (NMISS/(NMISS+N))*100;
10968  run;
 
NOTE: There were 4 observations read from the data set WORK.IMPT_DMDBCLASSOUT.
      WHERE ((TYPE='C') and (CRAW=' ')) or ((TYPE='N') and (NRAW=.));
NOTE: There were 6 observations read from the data set WORK.IMPUTE_0W995PV_DMDBVAROUT.
NOTE: The data set WORK.IMPT_MISS has 10 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10969  proc sort data=WORK.M3T475L9 NOTHREADS;
10970  by NAME;
10971  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: The data set WORK.M3T475L9 has 10 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10972  proc sort data=WORK.Impt_MISS NOTHREADS;
10973  by NAME;
10974  run;
 
NOTE: There were 10 observations read from the data set WORK.IMPT_MISS.
NOTE: The data set WORK.IMPT_MISS has 10 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10975  data WORK.M3T475L9;
10976  merge WORK.M3T475L9 WORK.Impt_MISS(in=_b);
10977  by NAME;
10978  if _b then output;
10979  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: There were 10 observations read from the data set WORK.IMPT_MISS.
NOTE: The data set WORK.M3T475L9 has 10 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
10980  data WORK.M3T475L9;
10981  set WORK.M3T475L9;
10982  if 0<PERCENTMISS<50 and method ne 'NONE' then IMPUTE = 1;
10983  else IMPUTE = 0;
10984  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: The data set WORK.M3T475L9 has 10 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10985  proc dmdb data=WORK.M3T475L9 outtable=WORK.NEWNAMES nameserver;
10986  names NAME;
10987  prefix M_ IMP_;
10988  where IMPUTE=1;
10989  run;
 
NOTE: There were 0 observations read from the data set WORK.M3T475L9.
      WHERE IMPUTE=1;
NOTE: The data set WORK.NEWNAMES has 0 observations and 3 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
10990  data WORK.M3T475L9;
10991  merge WORK.M3T475L9 WORK.NEWNAMES;
10992  by NAME;
10993  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: There were 0 observations read from the data set WORK.NEWNAMES.
NOTE: The data set WORK.M3T475L9 has 10 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
10994  proc dmdb data=WORK.M3T475L9 outtable=WORK.NEWNAMES nameserver;
10995  names NAME;
10996  prefix M_;
10997  where IMPUTE=0;
10998  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
      WHERE IMPUTE=0;
NOTE: The data set WORK.NEWNAMES has 10 observations and 2 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10999  data WORK.M3T475L9;
11000  merge WORK.M3T475L9 WORK.NEWNAMES;
11001  by NAME;
11002  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: There were 10 observations read from the data set WORK.NEWNAMES.
NOTE: The data set WORK.M3T475L9 has 10 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
11003  data WORK.Impt;
11004  run;
 
NOTE: The data set WORK.IMPT has 1 observations and 0 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
NOTE: View EMWS6.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
11005  data EMWS6.Impt_META;
11006  set WORK.M3T475L9;
11007  VALUE = .;
11008  run;
 
NOTE: There were 10 observations read from the data set WORK.M3T475L9.
NOTE: The data set EMWS6.IMPT_META has 10 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11009  proc print data=EMWS6.Impt_META(obs=500) label noobs;
11010  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,          NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel,         NOQUOTE))" PERCENTMISS = "%sysfunc(sasmsg(sashelp.dmine, rpt_percentmissing_vlabel, NOQUOTE))";
11011  var NAME LABEL PERCENTMISS;
11012  where IMP eq '' and PERCENTMISS>50;
11013  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_rejectedsummary_title, NOQUOTE))";
11014  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_numberobs_title,         NOQUOTE))";
11015  run;
 
NOTE: No observations were selected from data set EMWS6.IMPT_META.
NOTE: There were 0 observations read from the data set EMWS6.IMPT_META.
      WHERE (IMP=' ') and (PERCENTMISS>50);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                May 29, 2019
Time:                15:37:30
*------------------------------------------------------------*
11117  data _null_;
11118  set EMWS6.Impt_META end=eof;
11119  length string $34;
11120  retain missTotal;
11121  file #LN00145;
11122  if _n_=1 then misstotal = percentmiss;
11123  missTotal = percentmiss+misstotal;
11124  if IMP ne '' and METHOD ne 'NONE' then do;
11125  string = '"'!!strip(NAME)!!'"';
11126  put 'if NAME = ' string 'then delete;';
11127  put 'else ';
11128  string = '"'!!strip(IMP)!!'"';
11129  put 'if NAME    = ' string ' then do;';
11130  string = '"'!!strip(ROLE)!!'"';
11131  put '   ROLE    = ' string ';';
11132  string = '"'!!strip(FAMILY)!!'"';
11133  put '   FAMILY  = ' string ';';
11134  string = '"'!!strip(REPORT)!!'"';
11135  put '   REPORT  = ' string ';';
11136  string = '"'!!strip(LEVEL)!!'"';
11137  put '   LEVEL   = ' string ';';
11138  string = '"'!!strip(ORDER)!!'"';
11139  put '   ORDER   = ' string ';';
11140  put 'end;';
11141  end;
11142  if percentmiss>50 and ROLE ne 'TARGET' then do;
11143  string = '"'!!strip(NAME)!!'"';
11144  put 'if NAME = ' string ' then do;';
11145  put '   ROLE ="REJECTED";';
11146  put '   COMMENT = "Percent of missing exceeds 50%";';
11147  put 'end;';
11148  end;
11149  put 'else ';
11150  put 'if NAME  = "' M '" then do;';
11151  put '   ROLE  ="INPUT";';
11152  if percentmiss>0 then put '   LEVEL ="BINARY";';
11153  else put '   LEVEL ="UNARY";';
11154  put ' end;';
11155  run;
 
NOTE: The file #LN00145 is:
      Filename=G:\SASproject\Stock Analysis\Workspaces\EMWS6\Impt\CDELTA_TRAIN.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=29May2019:15:37:30,
      Create Time=29May2019:15:37:30
 
NOTE: 50 records were written to the file #LN00145.
      The minimum record length was 5.
      The maximum record length was 35.
NOTE: There were 10 observations read from the data set EMWS6.IMPT_META.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11156  filename emflow "G:\SASproject\Stock Analysis\Workspaces\EMWS6\Impt\EMFLOWSCORE.sas";
11157  *------------------------------------------------------------*;
11158  * Impt: Scoring DATA data;
11159  *------------------------------------------------------------*;
11160  data EMWS6.Impt_TRAIN
11161  / view=EMWS6.Impt_TRAIN
11162  ;
11163  set EMWS6.Trans_TRAIN
11164  ;
11165  %inc emflow;
11175  run;
 
NOTE: DATA STEP view saved on file EMWS6.IMPT_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS6.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11176  quit;
11177  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11178  filename emflow "G:\SASproject\Stock Analysis\Workspaces\EMWS6\Impt\EMFLOWSCORE.sas";
11179  *------------------------------------------------------------*;
11180  * Impt: Scoring VALIDATE data;
11181  *------------------------------------------------------------*;
11182  data EMWS6.Impt_VALIDATE
11183  / view=EMWS6.Impt_VALIDATE
11184  ;
11185  set EMWS6.Trans_VALIDATE
11186  ;
11187  %inc emflow;
11197  run;
 
NOTE: DATA STEP view saved on file EMWS6.IMPT_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS6.TRANS_VALIDATE.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11198  quit;
11199  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11200  *------------------------------------------------------------*;
11201  * Impt: Computing metadata for TRAIN data;
11202  *------------------------------------------------------------*;
 
NOTE: View EMWS6.IMPT_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: View EMWS6.IMPT_TRAIN.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
NOTE: View EMWS6.IMPT_VALIDATE.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                May 29, 2019
Time:                15:37:31
*------------------------------------------------------------*
11613  %let _nimpute = 0;
11614  data EMWS6.Impt_RESULT;
11615  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,        NOQUOTE))" METHOD = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputemethod_vlabel, NOQUOTE))" IMPUTED = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputedvar_vlabel,   NOQUOTE))" INDICATOR =
11616     "%sysfunc(sasmsg(sashelp.dmine, rpt_indicatorvar_vlabel, NOQUOTE))" VALUE = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputevalue_vlabel,  NOQUOTE))" ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel,        NOQUOTE))" LEVEL =
11617     "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel,       NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel,       NOQUOTE))" TRAIN = "%sysfunc(sasmsg(sashelp.dmine, rpt_missingcount_vlabel, NOQUOTE, TRAIN))";
11618  set EMWS6.Impt_META(where=(IMPUTED ne '') keep=NAME METHOD IMP M VALUE ROLE NMISS LEVEL LABEL rename=(IMP=IMPUTED M=INDICATOR NMISS=TRAIN)) end=eof;
11619  if eof then call symput('_nimpute', '1');
11620  run;
 
NOTE: There were 0 observations read from the data set EMWS6.IMPT_META.
      WHERE IMPUTED not = ' ';
NOTE: The data set EMWS6.IMPT_RESULT has 0 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11621  data EMWS6.Impt_EMSCOREVAR;
11622  length Name $32 formula $70 file $200;
11623  keep NAME Formula file;
11624  set EMWS6.Impt_META end=eof;
11625  *set EMWS6.Impt_RESULT end=eof;
11626  if M ne '' then do;
11627  NAME= M;
11628  file="IMPUTECODE\"!!strip(NAME)!!'.sas';
11629  output;
11630  end;
11631  if IMP ne '' then do;
11632  NAME= IMP;
11633  file="IMPUTECODE\"!!strip(NAME)!!'.sas';
11634  output;
11635  end;
11636  run;
 
NOTE: Variable formula is uninitialized.
NOTE: There were 10 observations read from the data set EMWS6.IMPT_META.
NOTE: The data set EMWS6.IMPT_EMSCOREVAR has 10 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
